<?xml version="1.0" encoding="utf-8"?>
<!--
  The PROVIDER_URL (2 *) and SECURITY_CREDENTIALS (2 *) are the responsibility of the owners
  of the machine. The developers do not know the values.
-->

<sources>
  
  <source adapterClass="edu.internet2.middleware.grouper.GrouperSourceAdapter">
    <id>g:gsa</id>
    <name>Grouper: Group Source Adapter</name>
    <type>group</type>
  </source>
  
  <source adapterClass="edu.internet2.middleware.grouper.subj.GrouperJndiSourceAdapter">
    <id>surfnet</id>
    <name>SURFnet LDAP</name>
    <type>person</type>
    <init-param>
      <param-name>INITIAL_CONTEXT_FACTORY</param-name>
      <param-value>com.sun.jndi.ldap.LdapCtxFactory</param-value>
    </init-param>
    
    <init-param>
      <param-name>PROVIDER_URL</param-name>
      <param-value>ldap://localhost:389</param-value>
    </init-param>
    
    <init-param>
      <param-name>SECURITY_AUTHENTICATION</param-name>
      <param-value>simple</param-value>
    </init-param>
    
    <init-param>
      <param-name>SECURITY_PRINCIPAL</param-name>
      <param-value>cn=ro,dc=surfconext,dc=nl</param-value>
    </init-param>
    <init-param>

      <param-name>SECURITY_CREDENTIALS</param-name>
      <param-value>ks97THqW2m3BN</param-value>
    </init-param>
     <init-param>
      <param-name>SubjectID_AttributeType</param-name>
      <param-value>collabPersonId</param-value>
    </init-param>

    <init-param>
      <param-name>Name_AttributeType</param-name>
      <param-value>cn</param-value>
    </init-param>
    <init-param>
      <param-name>Description_AttributeType</param-name>
      <param-value>cn</param-value>

    </init-param>

      <search>
        <searchType>searchSubject</searchType>
        <param>
            <param-name>filter</param-name>
            <param-value>
                (&amp; (collabPersonId=%TERM%) (objectclass=collabPerson))
            </param-value>

        </param>
        <param>
            <param-name>scope</param-name>
            <param-value>
                SUBTREE_SCOPE
            </param-value>
        </param>
        <param>
            <param-name>base</param-name>

            <param-value>
                dc=surfconext,dc=nl
            </param-value>
        </param>

    </search>
    <search>
        <searchType>searchSubjectByIdentifier</searchType>
        <param>

            <param-name>filter</param-name>
            <param-value>
                (&amp; (collabPersonId=%TERM%) (objectclass=collabPerson))
            </param-value>
        </param>
        <param>
            <param-name>scope</param-name>

            <param-value>
                SUBTREE_SCOPE
            </param-value>
        </param>
        <param>
            <param-name>base</param-name>
            <param-value>
                dc=surfconext,dc=nl
            </param-value>

        </param>
    </search>

    <search>
       <searchType>search</searchType>
         <param>
            <param-name>filter</param-name>
            <param-value>

                (&amp; (|(collabPersonId=%TERM%)(cn=*%TERM%*)(mail=*%TERM%*))(objectclass=collabPerson))
            </param-value>
        </param>
        <param>
            <param-name>scope</param-name>
            <param-value>
                SUBTREE_SCOPE
            </param-value>

        </param>
         <param>
            <param-name>base</param-name>
            <param-value>
                dc=surfconext,dc=nl
            </param-value>
        </param>
    </search>
 
    <attribute>sn</attribute>

    <attribute>givenName</attribute>
    <attribute>mail</attribute>
    <attribute>displayName</attribute>
    <attribute>cn</attribute>
    <attribute>o</attribute>

  </source>

  <source adapterClass="edu.internet2.middleware.grouper.subj.GrouperJndiSourceAdapter">
    <id>applications</id>
    <name>SURFconext Applications</name>
    <type>person</type>
    <init-param>
      <param-name>INITIAL_CONTEXT_FACTORY</param-name>
      <param-value>com.sun.jndi.ldap.LdapCtxFactory</param-value>
    </init-param>
    <init-param>
      <param-name>PROVIDER_URL</param-name>
      <param-value>ldap://localhost:389</param-value>
    </init-param>
    <init-param>

      <param-name>SECURITY_AUTHENTICATION</param-name>
      <param-value>simple</param-value>
    </init-param>
    <init-param>
      <param-name>SECURITY_PRINCIPAL</param-name>
      <param-value>cn=ro,dc=surfconext,dc=nl</param-value>
    </init-param>

    <init-param>
      <param-name>SECURITY_CREDENTIALS</param-name>
      <param-value>ks97THqW2m3BN</param-value>
    </init-param>
     <init-param>
      <param-name>SubjectID_AttributeType</param-name>
      <param-value>cn</param-value>

    </init-param>
    <init-param>
      <param-name>Name_AttributeType</param-name>
      <param-value>cn</param-value>
    </init-param>
    <init-param>
      <param-name>Description_AttributeType</param-name>

      <param-value>cn</param-value>
    </init-param>

    <search>
        <searchType>searchSubject</searchType>
        <param>
            <param-name>filter</param-name>
            <param-value>

                (&amp; (cn=%TERM%) (objectclass=applicationProcess))
            </param-value>
        </param>
        <param>
            <param-name>scope</param-name>
            <param-value>
                SUBTREE_SCOPE
            </param-value>

        </param>
        <param>
            <param-name>base</param-name>
            <param-value>
                dc=surfconext,dc=nl
            </param-value>
        </param>

    </search>

    <search>
        <searchType>searchSubjectByIdentifier</searchType>
        <param>
            <param-name>filter</param-name>
            <param-value>
                (&amp; (cn=%TERM%) (objectclass=applicationProcess))
            </param-value>

        </param>
        <param>
            <param-name>scope</param-name>
            <param-value>
                SUBTREE_SCOPE
            </param-value>
        </param>
        <param>
            <param-name>base</param-name>

            <param-value>
                dc=surfconext,dc=nl
            </param-value>
        </param>
    </search>

    <search>
       <searchType>search</searchType>
         <param>

            <param-name>filter</param-name>
            <param-value>
                (&amp; (cn=*%TERM%*) (objectclass=applicationProcess))
            </param-value>
        </param>
        <param>
            <param-name>scope</param-name>

            <param-value>
                SUBTREE_SCOPE
            </param-value>
        </param>
         <param>
            <param-name>base</param-name>
            <param-value>
                dc=surfconext,dc=nl
            </param-value>

        </param>
    </search>
  </source>

</sources>
